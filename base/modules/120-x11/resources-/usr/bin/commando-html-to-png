#!/usr/bin/env zsh

HTMLFILE=$1
CACHEDIR=/home/dev/.cache/commando/images
PNGFILE=$CACHEDIR/$(md5sum $HTMLFILE | cut -d ' ' -f 1).png

if [ ! -f $PNGFILE ] ; then
    mkdir -p $CACHEDIR
    chromium-browser --headless --screenshot=/tmp/commando.screenshot.png --window-size=2560x1440 $HTMLFILE
    convert /tmp/commando.screenshot.png -trim -shave 1x1 $PNGFILE
fi 

echo $PNGFILE